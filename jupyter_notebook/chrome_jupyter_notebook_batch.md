# Talon Jupyter Notebook on Google Chrome  

# [Batch Session]

## Open new tab on Google Chrome browser

There are 2 way (that I know of) to launch it:

* From the apps page: chrome://apps/

* Type ssh in the browser and hit **Tab** to select the  Secure Shell App.To launch it hit **Enter**.

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_ssh_url.png)



You should see a window like this:

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_ssh.png)



To ssh in Talon Viz Node, type your ** YOUR_EUID@vis-01.acs.unt.edu ** where it says *username@hostname or free from text* This will automatically fill in username and hostname fields.

Then enter 22 for the *port* field.

Then simply hit **Enter** or click **[ENTER] Connect**

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/viz_node_login_chrome.png)


Allow **Open ssh links**:

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_ssh_allow.png)


You should see a window like this on your first login. Type *yes* and hit **Enter**:

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_ssh_login.png)


Then you should be prompted to enter your Talon account password:

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_ssh_login_yes.png)


### Create and configure your .job file:

Now you will need to create a .job file just like a batch submisison job (Check [this](https://github.com/gmihaila/unt_hpc/tree/master/job_batch) out if not familiar with job submissions on Talon)
Your .job file should look like this:

```
  #!/bin/bash
  #SBATCH -p public
  #SBATCH --qos general
  #SBATCH -N 1
  #SBATCH --ntasks-per-node=28
  #SBATCH -C c6320
  #SBATCH --mail-user=user@my.unt.edu
  #SBATCH --mail-type=ALL

  module load keras/2.2.0
  
  unset XDG_RUNTIME_DIR
  jupyter notebook --no-browser --ip=0.0.0.0
```

The first 6 lines are configurable to anything you want. See [this](https://github.com/gmihaila/unt_hpc/tree/master/job_batch) for more details.


[This](https://github.com/gmihaila/unt_hpc/blob/master/jupyter_notebook/jupyter_notebook.job) is a job example file that you can use to start. You can add/remove resources or functionality to it just like with any job file.

The part that is very important for Jupyter Notebook in the job file is:


```
  module load keras/2.2.0
  unset XDG_RUNTIME_DIR
  jupyter notebook --no-browser --ip=0.0.0.0
```

Once you have the job file ready, you can launch it just like any job file on talon


```
  $ sbatch YOUR_JOB_FILE.job
```

This will launch your job supporting Jupyter Notebooks. We need to find the compute node where the notebooks is running. For this we will use the output file generated by the job file (For example: job_JOB_ID.out) should look like:



```
[I 12:33:10.043 NotebookApp] Serving notebooks from local directory: /home/gm0234
[I 12:33:10.043 NotebookApp] The Jupyter Notebook is running at:
[I 12:33:10.043 NotebookApp] http://(YOUR_NODE_ADDRESS or 127.0.0.1):YOUR_PORT_NUMBER/
[I 12:33:10.043 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).

```

As an example:

```
[I 12:33:10.043 NotebookApp] Serving notebooks from local directory: /home/gm0234
[I 12:33:10.043 NotebookApp] The Jupyter Notebook is running at:
[I 12:33:10.043 NotebookApp] http://(c32-9-29 or 127.0.0.1):8888/
[I 12:33:10.043 NotebookApp] Use Control-C to stop this server and shut down all kernels (twice to skip confirmation).

```


The part we care about is:

```
[I 12:33:10.043 NotebookApp] http://(c32-9-29 or 127.0.0.1):8888/

```

More exactly:

```
(c32-9-29 or 127.0.0.1):8888/

```

From this we know the **YOUR_NODE_ADDRESS**: 

```
c32-9-29

```
And **YOUR_PORT_NUMBER**:

```
8888

```

Having these 2 (YOUR_NODE_ADDRESS and YOUR_PORT_NUMBER) we can open a new terminal and login to forward that address to your local machine.

## Forward Jupyter Notebook to your local machine

Open new tab in Google Chrome.

Open the ssh app.

This time when you login, you will use the port number in the SSh Arguments:



```
$ SSH Arguments: -L 8888:c32-9-29:8888
```

So your window should look like this:

![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/chrome_forward_jupyter.png)


### Now you should have 2 tabs open with terminals. First one was used to launch Jupyter Notebook and get the port number. Second is used to forward the port number so you can see it on your local machine.

### Access your Jupyter Notebook:

   Now to access the Jupyter Notebook, open any browser (Chrome,Mozilla etc) and type:

   ```
   http://localhost:YOUR_PORT_NUMBER
   ```

   In my case, my port number is 8888 so I will have to use:

   ```
   http://localhost:8888
   ```
   You will see a webpage like this:

   ![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/screenshot_loginwindow_jupyter.png)

   This is where you will enter your password that you created when you used

   ```
   $ jupyter notebook password
   ```

   Now you are inside your Jupyer Notebook on your local machine browser that runs on Talon! Cool!

   This is how mine looks like after login:

   ![alt text](https://raw.githubusercontent.com/gmihaila/unt_hpc/master/misc/screenshot_logged_jupyter.png)

   I only have bin folder in this image. Yours will be different, you will see all your directories from Talon.

</br>

### [< Google Chrome Tutorial](https://github.com/gmihaila/unt_hpc/tree/master/chrome_plugin)

### [< Main Page](https://github.com/gmihaila/unt_hpc)







